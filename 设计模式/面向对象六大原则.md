# 面向对象六大原则



## 单一职责原则 （ Single Responsibility Principle ）

单一职责原则的英文名称是Single Responsibility Principle，简称是SRP，简单来说一个类**只做一件事**。对于职责如何判定，那就仁者见仁，智者见智了。

注意，单一职责原则并不是说一个类只有一个函数，而是说这个类中的函数所做的工作必须要是高度相关的，也就是**高内聚**。

### 具体例子

* Volley 框架中的HttpStack接口。

优点

* 类的复杂性降低，实现什么职责都有清晰明确的定义；
* 可读性提高，复杂性降低，那当然可读性提高了；
* 可维护性提高，可读性提高，那当然更容易维护了；
* 变更引起的风险降低，变更是必不可少的，如果接口的单一职责做得好，一个接口修改只对相应的实现类有影响，对其他的接口无影响，这对系统的扩展性、维护性都有非常大的帮助。


## 里氏替换原则 （ Liskov Substitution Principle）

里氏替换原则就是**依赖于继承、多态**这两大特性。里氏替换原则简单来说就是所有引用基类的地方必须能透明地使用其子类的对象。通俗点讲，**只要父类能出现的地方子类就可以出现**，而且替换为子类也不会产生任何错误或异常，使用者可能根本就不需要知道是父类还是子类。但是，反过来就不行了，有子类出现的地方，父类未必就能适应。

### 具体例子

* 《设计模式之禅》Gun的例子;
* Volley框架中的BasicNetwork构造函数中依赖的是HttpStack，使得只要实现HttpStack的类都可以使用。不限于HttpClient和HttpURLConnection。

子类必须实现父类的方法。
子类可以有自己的个性。
覆盖或实现父类方法时输入参数可以被放大。
覆写或实现父类方法时，输出结果可以被缩小

 ### 优点

* 代码共享，减少创建类的工作量，每个子类都拥有父类的方法和属性；
* 提高代码的重用性；
* 提高代码的可扩展性，实现父类的方法就可以“为所欲为”了，很多开源框架的扩展接口都是通过继承父类来完成的；
* 提高产品或项目的开放性。

###  缺点

* 继承是侵入性的。只要继承，就必须拥有父类的所有属性和方法；
* 降低代码的灵活性。子类必须拥有父类的属性和方法，让子类自由的世界中多了些约束；
* 增强了耦合性。当父类的常量、变量和方法被修改时，必需要考虑子类的修改，而且在缺乏规范的环境下，这种修改可能带来非常糟糕的结果——大片的代码需要重构。



## 依赖倒置原则 （Dependence Inversion Principle）


* 高层模块不应该依赖低层模块，两者都应该依赖其抽象；
* 抽象不应该依赖细节；
* 细节应该依赖抽象。

赖倒置原则在 Java 语言中的表现就是：**模块间的依赖通过抽象发生，实现类之间不发生直接的依赖关系，其依赖关系是通过接口或抽象类产生的。** 其实就是一句话:面向接口编程，或者说是面向抽象编程，这里的抽象指的是接口或者抽象类。面向接口编程是面向对象精髓之一。

对象的依赖方式


1. 构造函数传递依赖
2. Setter方法传递依赖对象
3. 接口声明依赖对象。


### 具体例子


* Volley框架中的BasicNetwork构造函数中依赖的是HttpStack，而不是 HttpClientStack或者 HurlStack。
* 《设计模式之禅》中，司机开奔驰，宝马车的例子


优点
* 可扩展性好；
* 耦合度低。



## 开闭原则 （ Open-Close Principle ）

开闭原则的定义是 : 一个软件实体如类、模块和函数应该对**扩展开放**，对**修改关闭**。
在软件开发过程中，永远不变的就是变化。开闭原则是使我们的软件系统拥抱变化的核心原则之一。对扩展可放，对修改关闭给出了高层次的概括，即在需要对软件进行升级、变化时应该通过扩展的形式来实现，而非修改原有代码。

### 具体例子

* 在Volley中，开闭原则体现得比较好的是Request类族的设计。 在开发C/S应用时，服务器返回的数据格式多种多样，有字符串类型、xml、json等。而解析服务器返回的Response的原始数据类型则是通过Request类来实现的，这样就使得Request类对于服务器返回的数据格式有良好的扩展性，即Request的可变性太大。 例如我们返回的数据格式是Json，那么我们使用JsonObjectRequest请求来获取数据。
* 《设计模式之禅》中，BookStore的例子，接口IBookStroe，实现类NovelBook.如果需要打折时，该怎样处理？扩展NovelBook类，重写getPrice()方法，OffNovelBook。

优点
* 增加稳定性；
* 可扩展性高。


## 接口隔离原则 （Interface Segregation Principle）

什么是接口？？接口有两种，实例接口（Object Interface），Person zhangsan = new Person()产生一个实例，Person类就是zhangsan的接口。类接口，Interface定义的类。

客户端不应该依赖它不需要的接口；**一个类对另一个类的依赖应该建立在最小的接口上**。根据接口隔离原则，当一个接口太大时，我们需要将它分割成一些更细小的接口，使用该接口的客户端仅需知道与之相关的方法即可。

具体例子

* 在Volley 的网络队列中是会对请求进行排序的。 Volley内部使用PriorityBlockingQueue来维护网络请求队列，PriorityBlockingQueue需要调用Request类的compareTo函数来进行排序。 试想一下，PriorityBlockingQueue其实只需要调用Request类的排序方法就可以了，其他的接口它根本不需要，即PriorityBlockingQueue只需要compareTo这个接口，而这个compareTo方法就是我们上述所说的最小接口。
* 《设计模式之禅》中，美女的例子。现在有一个定义美女的接口，但是随着审美观的改变，美女的定义也会改变。所以需要将IPrettyGirl接口分割成更加小的接口。即，可分为外貌型美女和气质型美女的接口。

优点

* 降低耦合性；
* 提升代码的可读性；
* 隐藏实现细节。


## 迪米特原则 （ Law of Demeter ）

迪米特法则也称为**最少知识原则**（Least Knowledge Principle）， 一个对象应该对其他对象有最少的了解。  **Only talk to your immedate friends**（ 只与直接的朋友通信。） 什么叫做直接的朋友呢？每个对象都必然会与其他对象有耦合关系，两个对象之间的耦合就成为朋友关系，这种关系的类型有很多，例如组合、聚合、依赖等。
具体例子

*  Volley框架下的Cache接口定义了缓存类需要实现的最小接口，依赖缓存类的对象只需要知道这些接口即可。如Volley类与DiskBasedCache直接进行交互。
*  《设计模式之禅》中，老师让体育委员清点女生，要注意老师类不应该和女生类直接交互。

优点

* 降低复杂度；
* 降低耦合度；
* 增加稳定性。