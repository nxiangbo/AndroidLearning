# Android IPC机制

既然是进程间通信，当然要有两个以上的进程。几乎每个系统都会有IPC,如Linux系统可以通过管道、共享内存、信号量等进行进程间的通信。 

那么，Android 已什么方式进行进程间通信呢？？ 

Android虽然是一种基于Linux内核的系统，但有自己的特点。比如**Binder**、Socket等 



进程间通信的应用场景有哪些呢？？ 

1. 一个应用因为某些原因需要**自身**采用多进程进程进行通信。比如，某些模块需要运行在单独的进程中；需要通过多进程获取多份内存空间。 
2. 向**其他应用**请求数据。 



## Android中的多进程模式 

在Android中，使用多进程，**只能**在AndroidMenifest配置文件中的Activity标签中声明 android：process=“processName”。当然，在特殊情况，也可以在native层去**fork**一个**新的进程**。 



## 多进程模式的运行机制 

如果你认为多进程只是在配置文件中声明android：process属性，那你就想的太简单啦。 

那么，使用多进程都会造成哪些问题呢？？ 

Android为**每个应用**都分配一个**独立**的虚拟机，或者说为**每个进程**都分配一个**独立的虚拟机**，**不同的虚拟机**在内存分配上有**不同的地址空间**，这就导致在不**同的虚拟机**中访问**同一个类**的对象会产生**多个副本**。 

所有运行在不同进程的四大组件，只要他们之间需要通过内存来共享数据，都会共享失败，这就是多进程的主要影响。 



一般来说，使用多进程会造成如下几个方面的问题： 

1. 静态成员和单例模式完全失效； 
2. 线程同步机制完全失效； 
3. SharedPreferences的可靠性下降； SharedPreferences**不支持**两个进程同时执行写操作。 
4. Application会多次重建； 运行在**不同进程**的组件属于**两个不同**的虚拟机和Application。 